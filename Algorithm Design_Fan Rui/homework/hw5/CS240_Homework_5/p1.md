# 算法hw5

Date: 5/17/2023, 7:04:55 PM
Model: Default
generated by [ChatGPT Web Share](https://github.com/moeakwak/chatgpt-web-share)

---

## 1. Suppose you want to estimate the fraction $f$ o...

### User

Suppose you want to estimate the fraction $f$ of people who skateboard in ShanghaiTech. Assume that you can select a ShanghaiTech student uniformly at random and determine whether they skateboard. Also, assume you know a lower bound $0 < a < f$. Design a procedure for estimating $f$ by some $\hat{f}$ such that Pr$[|f - \hat{f}| > \varepsilon f] < \delta$, for any choice of constants $0 < a, \varepsilon, \delta < 1$. What is the smallest number of residents you must query?

### ChatGPT

To estimate the fraction $f$ of people who skateboard in ShanghaiTech, we can use a technique called sequential probability ratio test (SPRT). The SPRT allows us to make statistically reliable estimates using a minimal number of samples.

Here's the procedure to estimate $f$ with the desired properties:

1. Initialize the parameters:
   - Set $0 < a < f$, which is the known lower bound on $f$.
   - Set $0 < \varepsilon, \delta < 1$, which are the desired tolerances.
   - Set $n = 0$, the initial number of samples.
   - Set $X = 0$, the initial count of skateboarders.
   - Set $Y = 0$, the initial count of non-skateboarders.
   - Set $S = 0$, the initial log-likelihood ratio.

2. Repeat the following steps until the stopping condition is met:
   - Select a random resident from ShanghaiTech uniformly.
   - Determine whether the selected resident skateboards.
   - If the resident skateboards, increment $X$ by 1. Otherwise, increment $Y$ by 1.
   - Increment $n$ by 1.
   - Update the log-likelihood ratio $S$ using the observed outcome:
     - If $X/Y > f/(1 - f)$, set $S$ to $S + \log\left(\frac{f}{1 - f}\right)$.
     - If $X/Y < f/(1 - f)$, set $S$ to $S + \log\left(\frac{1 - f}{f}\right)$.
     - If $X/Y = f/(1 - f)$, set $S$ to $S + \log\left(\frac{a(1 - f)}{f(1 - a)}\right)$.

3. Compute the estimated fraction $\hat{f}$ as $\hat{f} = \frac{X}{n}$.

4. Compute the test boundaries:
   - Set $L = \frac{\log(1/\delta) + \varepsilon\log\left(\frac{1 - a}{a}\right)}{\log((1 - a)/a)}$.
   - Set $U = \frac{\log(\delta) + \varepsilon\log\left(\frac{1 - a}{a}\right)}{\log((1 - a)/a)}$.

5. Check the stopping condition:
   - If $S \leq L$, stop and output $\hat{f}$ as the estimate.
   - If $S \geq U$, stop and output $\hat{f}$ as the estimate.
   - Otherwise, go back to step 2.

The stopping condition ensures that the estimated fraction $\hat{f}$ satisfies Pr$[|f - \hat{f}| > \varepsilon f] < \delta$.

The number of residents you must query depends on the desired tolerances $\varepsilon$ and $\delta$. The stopping condition guarantees that the SPRT terminates when either the lower or upper test boundary is crossed. The smallest number of residents you must query can be calculated using the test boundaries. The minimum number of residents, denoted as $N$, is given by:

$N = \lceil L^U \rceil$

This formula ensures that the estimated fraction $\hat{f}$ satisfies the desired tolerance condition.

---

